#####################################################
#
# 	     SEQRAM CONTROL RECORDS 
#
# The following records work as triggers or monitors
# for the sequencer responsible for SeqRAM control.
#
#####################################################


#####################################################
# State Machine Status (read only)
record(mbbo, "$(P)$(R)STATEMACHINE"){
	field(SCAN, "Passive")	
	field(ZRST, "Initializing")
	field(ZRVL, "0")
	field(ONST, "Stopped")
	field(ONVL, "1")
	field(TWST, "Continuous")
	field(TWVL, "2")
	field(THST, "Injection")
	field(THVL, "3")
	field(FRST, "Preparing Continuous")
	field(FRVL, "4")
	field(FVST, "Preparing Injection")
	field(FVVL, "5")
	field(SXST, "Restarting Continuous")
	field(SXVL, "6")
	field(VAL, "0")	
	field(DESC, "Injection State Machine Status")
	field(ASG, "Reserved")
}

#####################################################
# Run Trigger: Run SeqRAM 1
record(bo, "$(P)$(R)ContinuousEvt-Sel"){
	field(SCAN, "Passive")
	field(ZNAM, "Dsbl")
	field(ONAM, "Enbl")
	field(DESC, "Continuous event send Disable/Enable")
}

record(bi, "$(P)$(R)ContinuousEvt-Sts"){
	field(SCAN, "Passive")
	field(ZNAM, "Dsbl")
	field(ONAM, "Enbl")
	field(DESC, "Continuous event send Disable/Enable")
}

#####################################################
# Injection Trigger: Run SeqRAM 2
record(bo, "$(P)$(R)InjectionEvt-Sel"){
	field(SCAN, "Passive")
	field(ZNAM, "Dsbl")
	field(ONAM, "Enbl")
	field(DESC, "Injection event send Disable/Enable")
}

record(bi, "$(P)$(R)InjectionEvt-Sts"){
	field(SCAN, "Passive")
	field(ZNAM, "Dsbl")
	field(ONAM, "Enbl")
	field(DESC, "Injection event send Disable/Enable")
}

#####################################################
# Restart Trigger: Reload events and restart SeqRAMs
record(bo, "$(P)$(R)UpdateEvt-Cmd"){
	field(SCAN, "Passive")
	field(ZNAM, "Dsbl")
	field(ONAM, "Enbl")
	field(HIGH, "1")
	field(DESC, "Reload events and restart SeqRAMs")
}

#####################################################
# This PV is observed by the State Machine in sncSeqRAM.stt
record(calc, "$(P)$(R)EvtDelayMod"){
	field(DESC, "Event timestamp mod")
}

record(bo, "$(P)$(R)EvtSyncStatus-Mon"){
	field(SCAN, "Passive")
	field(ZNAM, "Unsynced")
	field(ONAM, "Synced")
	field(DESC, "Sync status of the events in HW and IOC")
}

